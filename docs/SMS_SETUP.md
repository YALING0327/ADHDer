# 阿里云短信服务配置指南

## 💰 价格说明
- **短信费用**: 0.045元/条
- **免费额度**: 新用户通常有100-200条免费额度
- **月费用预估**: 1000条短信 ≈ 45元/月

## 🔧 配置步骤

### 1. 注册阿里云账号
1. 访问 https://www.aliyun.com
2. 注册并完成实名认证
3. 开通短信服务

### 2. 创建 AccessKey
1. 登录阿里云控制台
2. 点击右上角头像 → AccessKey管理
3. 创建 AccessKey，保存 AccessKey ID 和 AccessKey Secret

### 3. 申请短信签名
1. 进入短信服务控制台
2. 签名管理 → 添加签名
3. 签名内容：`ADHDer`
4. 签名来源：`APP应用`
5. 等待审核通过（通常1-2小时）

### 4. 申请短信模板
1. 模板管理 → 添加模板
2. 模板类型：`验证码`
3. 模板内容：`您的验证码是${code}，5分钟内有效，请勿泄露。`
4. 等待审核通过（通常1-2小时）

### 5. 配置环境变量
在 Vercel 项目设置中添加：
```
ALIBABA_CLOUD_ACCESS_KEY_ID=你的AccessKey ID
ALIBABA_CLOUD_ACCESS_KEY_SECRET=你的AccessKey Secret
SMS_SIGN_NAME=ADHDer
SMS_TEMPLATE_CODE=SMS_123456789
```

### 6. 安装依赖
```bash
cd apps/web
npm install @alicloud/dysmsapi20170525 @alicloud/openapi-client
```

### 7. 启用短信服务
在 `apps/web/app/api/auth/request-phone-otp/route.ts` 中取消注释短信发送代码。

## 🔄 备选方案

### 腾讯云短信
- **价格**: 0.045元/条
- **免费额度**: 100条/月
- **配置**: 类似阿里云流程

### 华为云短信
- **价格**: 0.045元/条
- **免费额度**: 200条/月

## 📱 测试流程

### 开发环境
- 验证码会在控制台打印
- 无需真实发送短信

### 生产环境
1. 配置阿里云 AccessKey
2. 申请签名和模板
3. 设置环境变量
4. 测试发送功能

## 🛡️ 安全建议

1. **频率限制**: 同一手机号1分钟内只能发送1次
2. **验证码过期**: 5分钟自动过期
3. **错误处理**: 发送失败时显示友好提示
4. **成本控制**: 设置每日发送限额

## 📊 成本预估

| 用户规模 | 月发送量 | 月费用 |
|---------|---------|--------|
| 100用户 | 500条 | 22.5元 |
| 500用户 | 2500条 | 112.5元 |
| 1000用户 | 5000条 | 225元 |

## 🚀 快速开始

1. **开发阶段**: 使用控制台打印验证码
2. **测试阶段**: 申请阿里云免费额度
3. **生产阶段**: 根据用户量调整套餐

## 📞 技术支持

- 阿里云短信服务文档: https://help.aliyun.com/product/44282.html
- 腾讯云短信服务文档: https://cloud.tencent.com/document/product/382
